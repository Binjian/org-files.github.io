<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Git in a Nutshell and Hands-On</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" href="https://cdn.simplecss.org/simple.min.css" />
<style> .figure p {text-align: center;}</style>
<script>
  window.MathJax = {
    tex: {
      ams: {
        multlineWidth: '85%'
      },
      tags: 'ams',
      tagSide: 'right',
      tagIndent: '.8em'
    },
    chtml: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    svg: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    output: {
      font: 'mathjax-modern',
      displayOverflow: 'overflow'
    }
  };
</script>

<script
  id="MathJax-script"
  async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">Git in a Nutshell and Hands-On</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org7d49543">Overview</a></li>
<li><a href="#org02173a5">Short Review of Git Internal Basics</a></li>
<li><a href="#org8df16f6">Tools and Operations in a typical use case for a mocking Repo</a></li>
</ul>
</div>
</div>



<div id="outline-container-org7d49543" class="outline-2">
<h2 id="org7d49543">Overview</h2>
<div class="outline-text-2" id="text-org7d49543">

<div id="orgd2aa69c" class="figure">
<p><img src="file:///home/n/.org.d/roam/img/git_in_a_nutshell/git.png" alt="git.png" />
</p>
</div>
</div>

<div id="outline-container-org4141815" class="outline-3">
<h3 id="org4141815">question "git submodule for each"</h3>
<div class="outline-text-3" id="text-org4141815">
</div>
<div id="outline-container-org392c2b0" class="outline-4">
<h4 id="org392c2b0">command line</h4>
<div class="outline-text-4" id="text-org392c2b0">
<div class="org-src-container">
<pre class="src src-[[roam:bash">git submodule foreach --recursive '
git log --oneline -n 5'
</pre>
</div>

<div class="org-src-container">
<pre class="src src-[[roam:bash">git submodule foreach --recursive 'git log --oneline HEAD...HEAD~5'
</pre>
</div>

<div class="org-src-container">
<pre class="src src-[[roam:bash">git submodule foreach --recursive 'git log --oneline docker...docker~5'
</pre>
</div>

<div class="org-src-container">
<pre class="src src-[[roam:bash">git submodule foreach --recursive '
REV1=HEAD;
REV2=HEAD~10;
SHA1=$(cd $toplevel &amp;&amp; git ls-tree $REV1 $sm_path | grep -E -o "[0-9a-f]{40}");
SHA2=$(cd $toplevel &amp;&amp; git ls-tree $REV2 $sm_path | grep -E -o "[0-9a-f]{40}");
git log --oneline $SHA1...$SHA2'
</pre>
</div>

<div class="org-src-container">
<pre class="src src-[[roam:bash">git submodule foreach --recursive '
SHA1=$(cd $toplevel &amp;&amp; cd $sm_path &amp;&amp; git log | grep -E -o "[0-9a-f]{40}" | head -1);
SHA2=$(cd $toplevel &amp;&amp; cd $sm_path &amp;&amp; git log | grep -E -o "[0-9a-f]{40}" | head -10 | tail -n1);
git log --oneline $SHA1...$SHA2'
</pre>
</div>


<div class="NOTES" id="org15cfd17">
<p>
git submodule is not a good solution! no integrity! look at OpenCV, ROS
</p>
<ul class="org-ul">
<li>git submodule update -&gt; no branch</li>
<li>submodule tracking branch needs to be configured</li>
<li>pushing order with main repo (has the responsibility to set the branch and version it tracks, and it's static, unless configured in main repo)</li>
</ul>
<p>
Without knowing the internals, like learning Chemistry without knowledge of atomic physics.
Learning Deeper is smart, not Learning Wider! Learning Wider is memorization, computers can better!
No magic! magic is when you don't understand! magic is accomanied with fear!
</p>

</div>
</div>
</div>

<div id="outline-container-orgfec0019" class="outline-4">
<h4 id="orgfec0019">Porcelan:</h4>
<div class="outline-text-4" id="text-orgfec0019">
<ul class="org-ul">
<li>emacs magit</li>
<li>git lens</li>
<li>gitraken</li>
<li>git commandline</li>
</ul>
</div>
</div>
<div id="outline-container-orgc3f4257" class="outline-4">
<h4 id="orgc3f4257">Concept, no command manual articulation</h4>
</div>
</div>
</div>
<div id="outline-container-org02173a5" class="outline-2">
<h2 id="org02173a5">Short Review of Git Internal Basics</h2>
<div class="outline-text-2" id="text-org02173a5">
</div>
<div id="outline-container-orga9fc3e7" class="outline-3">
<h3 id="orga9fc3e7">hash table</h3>
<div class="outline-text-3" id="text-orga9fc3e7">
<ul class="org-ul">
<li>effiency
<ul class="org-ul">
<li>hash function, hundred milliseconds per Million hashes</li>
<li>indexing and hash conflicts O(1), (array O(N))</li>
<li>low probablity of hash conflicts</li>
</ul></li>
<li>SHA-1 (20Byte, 40Hex, 160bit, 8bit for directory)
<ul class="org-ul">
<li>security, compromised -&gt; SHA256(32bit), SHA512(64bit)</li>
<li>ipv6 128bit \(2^{128}\)  79 mio bio tri (\(10^{78-80}\), \(7*10^{27}\), 200 bio tri stars)</li>
</ul></li>
<li>python dict (json), set (not list, no tuple)</li>
<li>mongodb object, object</li>
<li>Object Storage System</li>
</ul>
</div>
</div>
<div id="outline-container-org6f24488" class="outline-3">
<h3 id="org6f24488">four objects</h3>
<div class="outline-text-3" id="text-org6f24488">
<ul class="org-ul">
<li>tree (spatial/topological tree)</li>
<li>blob</li>
<li>commit (timing tree)</li>
<li>annotated tag</li>
</ul>
</div>
</div>
<div id="outline-container-org8d7cbc1" class="outline-3">
<h3 id="org8d7cbc1">power of abstraction</h3>
</div>
<div id="outline-container-org046de3d" class="outline-3">
<h3 id="org046de3d">content addressable filesystem / database</h3>
<div class="outline-text-3" id="text-org046de3d">
<ul class="org-ul">
<li>equality among objects</li>
</ul>
</div>
</div>
<div id="outline-container-orgf8256a1" class="outline-3">
<h3 id="orgf8256a1">gitrevisions (cherry-pick, reset, log, merge)</h3>
<div class="outline-text-3" id="text-orgf8256a1">
<ul class="org-ul">
<li>HEAD^^/HEAD^2</li>
<li>HEAD@{2}</li>
<li>HEAD~~/HEAD~2</li>
<li>master..experiment</li>
<li>master&#x2026;experiment</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org8df16f6" class="outline-2">
<h2 id="org8df16f6">Tools and Operations in a typical use case for a mocking Repo</h2>
<div class="outline-text-2" id="text-org8df16f6">
</div>
<div id="outline-container-org818d8d2" class="outline-3">
<h3 id="org818d8d2">Use Case (regret medicine)</h3>
<div class="outline-text-3" id="text-org818d8d2">
<ul class="org-ul">
<li>create a new feature branch for an existing repository</li>
<li>add changes (git add)</li>
<li>submit changes (git commit)</li>
<li>regret the last change (git commit and regret at once)</li>
<li>regret a segment of history (git commit multiple times and regret)</li>
<li>regret submission to all (git push and regret)</li>
<li>regret a branch (git rebase)</li>
<li>Please brainstorm!</li>
</ul>
</div>
</div>
<div id="outline-container-org3335330" class="outline-3">
<h3 id="org3335330">git branch (off, out)</h3>
<div class="outline-text-3" id="text-org3335330">
<ul class="org-ul">
<li>Add a lot of changes</li>
</ul>
</div>
</div>
<div id="outline-container-orge26580f" class="outline-3">
<h3 id="orge26580f">git commit -a</h3>
<div class="outline-text-3" id="text-orge26580f">
<ul class="org-ul">
<li>use case: regret on the recent change, need -f for git push.</li>
</ul>
</div>
</div>
<div id="outline-container-orgd2d846b" class="outline-3">
<h3 id="orgd2d846b">git reset</h3>
<div class="outline-text-3" id="text-orgd2d846b">
<ul class="org-ul">
<li>soft, <b>mixed</b>, hard  Why mixed is default, when hard usually results in a clean state?</li>
<li>hard dangerous (detached/isolated commit)</li>
<li>soft, mixed is more conservative &amp; protective</li>
</ul>
</div>
</div>
<div id="outline-container-orgc3fc2bb" class="outline-3">
<h3 id="orgc3fc2bb">git remote</h3>
<div class="outline-text-3" id="text-orgc3fc2bb">
<ul class="org-ul">
<li>multiple remotes for open source repositories</li>
</ul>
</div>
</div>
<div id="outline-container-org837ee8f" class="outline-3">
<h3 id="org837ee8f">git rebase</h3>
<div class="outline-text-3" id="text-org837ee8f">
<ul class="org-ul">
<li>git push force</li>
<li>git merge</li>
</ul>
</div>
</div>
<div id="outline-container-orgbb15863" class="outline-3">
<h3 id="orgbb15863">git reflog</h3>
<div class="outline-text-3" id="text-orgbb15863">
<ul class="org-ul">
<li>your activties history (HEAD &amp; branches)</li>
</ul>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2023-09-18 Mon 00:00</p>
<p class="creator">忻斌健</p>
</div>
</body>
</html>